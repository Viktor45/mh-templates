# –û–°–ù–û–í–ù–´–ï –ü–ê–†–ê–ú–ï–¢–†–´
allow-lan: true
mode: rule
log-level: $LOG_LEVEL
ipv6: $IPV6
unified-delay: true
external-controller: $EXTERNAL_CONTROLLER_ADDRESS:$UI_PORT
external-ui: $EXTERNAL_UI_PATH
external-ui-url: $EXTERNAL_UI_URL
secret: $UI_SECRET

# ZKEEN geodata
geodata-mode: true
geox-url:
  geosite: "https://github.com/jameszeroX/zkeen-domains/releases/latest/download/zkeen.dat"
  geoip: "https://github.com/jameszeroX/zkeen-ip/releases/latest/download/zkeenip.dat"

# –ê–Ω–∞–ª–∏–∑ —Ç—Ä–∞—Ñ–∏–∫–∞
sniffer:
  enable: true
  parse-pure-ip: true
  force-dns-mapping: true
  sniff:
    HTTP:
      ports: [80, 8080-8880]
      override-destination: true
    TLS:
      ports: [443, 8443]
    QUIC:
      ports: [443, 8443]

# DNS –ù–ê–°–¢–†–û–ô–ö–ò
dns:
  enable: $DNS_ENABLE
  #  prefer-h3: true
  #  use-hosts: true
  use-system-hosts: $DNS_USE_SYSTEM_HOSTS
  #  listen: 127.0.0.1:53
  #  ipv6: false
  #  enhanced-mode: redir-host
  #  default-nameserver:
  #    - tls://1.1.1.1
  #    - tls://1.0.0.1
  #    - tls://8.8.8.8
  #    - tls://8.8.4.4
  #    - tls://9.9.9.9
  #  proxy-server-nameserver:
  #    - tls://1.1.1.1
  #    - tls://1.0.0.1
  #    - tls://8.8.8.8
  #    - tls://8.8.4.4
  #    - tls://9.9.9.9
  #    - https://cloudflare-dns.com/dns-query
  #    - https://9.9.9.9/dns-query
  #  direct-nameserver:
  #    - tls://77.88.8.8#DIRECT
  #    - https://77.88.8.8/dns-query#DIRECT
  nameserver:
    - system
#    - https://cloudflare-dns.com/dns-query#PROXY

# LISTENERS (TUN + mixed)
listeners:
  - name: mixed-in
    type: mixed
    port: $MIXED_PORT
  - name: tun-in
    type: tun
    stack: $TUN_STACK
    auto-detect-interface: $TUN_AUTO_DETECT_INTERFACE
    auto-route: $TUN_AUTO_ROUTE
    auto-redirect: $TUN_AUTO_REDIRECT
    inet4-address:
      - $TUN_INET4_ADDRESS

# –ü–û–î–ü–ò–°–ö–ò –ù–ê –ü–†–û–ö–°–ò
proxy-providers:
$PROVIDERS_BLOCK
#    override:
#      tfo: true
#      mptcp: true
#      udp: true

# –ì–†–£–ü–ü–´ –ü–†–û–ö–°–ò
proxy-groups:
  # –ì–ª–∞–≤–Ω—ã–π –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å —Ä–µ–∂–∏–º–æ–≤
  - name: SELECTOR
    type: select
    proxies:
      - PROXY AUTO # –ü–æ–ª–Ω–æ—Å—Ç—å—é –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–µ–∂–∏–º
      - PROXY MANUAL # –†—É—á–Ω–æ–π –≤—ã–±–æ—Ä
      - DIRECT # –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω—ã–π –ø—Ä—è–º–æ–π –¥–æ—Å—Ç—É–ø

  # –ì—Ä—É–ø–ø–∞ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ä–µ–∂–∏–º–∞.
  # –õ–æ–≥–∏–∫–∞: –°–Ω–∞—á–∞–ª–∞ –ø—ã—Ç–∞–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–∞–º—ã–π –±—ã—Å—Ç—Ä—ã–π –ø—Ä–æ–∫—Å–∏ (PROXY FASTEST).
  # –ï—Å–ª–∏ –æ–Ω –ø–∞–¥–∞–µ—Ç, –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç—Å—è –Ω–∞ –≥—Ä—É–ø–ø—É PROXY FAILOVER, –∫–æ—Ç–æ—Ä–∞—è –ø–µ—Ä–µ–±–µ—Ä–µ—Ç –≤—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ –∂–∏–≤—ã–µ –ø—Ä–æ–∫—Å–∏.
  # –ï—Å–ª–∏ –∏ —Ç–∞–º –≤—Å–µ –º–µ—Ä—Ç–≤—ã, –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—Å—è –Ω–∞ DIRECT.
  - name: PROXY AUTO
    type: fallback
    proxies:
      - PROXY FASTEST
      - PROXY FAILOVER
      - DIRECT
    url: http://www.msftncsi.com/ncsi.txt
    # –ò–Ω—Ç–µ—Ä–≤–∞–ª –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏, —á—Ç–æ–±—ã "–æ—Ç–ª–∏–ø–Ω—É—Ç—å" –æ—Ç DIRECT/PROXY FAILOVER –∏ –≤–µ—Ä–Ω—É—Ç—å—Å—è –∫ PROXY FASTEST
    interval: 200

  # –ì—Ä—É–ø–ø–∞ –¥–ª—è –≤—ã–±–æ—Ä–∞ —Å–∞–º–æ–≥–æ –±—ã—Å—Ç—Ä–æ–≥–æ –∏–∑ –ñ–ò–í–´–• –ø—Ä–æ–∫—Å–∏.
  - name: PROXY FASTEST
    type: url-test
    use:
$PROVIDERS_LIST
    url: http://www.msftncsi.com/ncsi.txt
    # –ò–Ω—Ç–µ—Ä–≤–∞–ª –¥–ª—è –ø–µ—Ä–µ—Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ –∂–∏–≤—ã—Ö –ø—Ä–æ–∫—Å–∏ –ø–æ —Å–∫–æ—Ä–æ—Å—Ç–∏
    interval: 300
    lazy: false

  # –ì—Ä—É–ø–ø–∞ –¥–ª—è –ø–µ—Ä–µ–±–æ—Ä–∞ –í–°–ï–• –∂–∏–≤—ã—Ö –ø—Ä–æ–∫—Å–∏ –≤ —Å–ª—É—á–∞–µ –æ—Ç–∫–∞–∑–∞ —Å–∞–º–æ–≥–æ –±—ã—Å—Ç—Ä–æ–≥–æ.
  # –≠—Ç–æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ –º—ã –Ω–µ –ø–µ—Ä–µ–∫–ª—é—á–∏–º—Å—è –Ω–∞ DIRECT, –ø–æ–∫–∞ –µ—Å—Ç—å —Ö–æ—Ç—å –æ–¥–∏–Ω –∂–∏–≤–æ–π –ø—Ä–æ–∫—Å–∏.
  - name: PROXY FAILOVER
    type: fallback
    use:
$PROVIDERS_LIST
    url: http://www.msftncsi.com/ncsi.txt
    interval: 200

  # –ì—Ä—É–ø–ø–∞ –¥–ª—è —Ä—É—á–Ω–æ–≥–æ –≤—ã–±–æ—Ä–∞ —Å–µ—Ä–≤–µ—Ä–∞ –∏–∑ –ø–æ–¥–ø–∏—Å–∫–∏.
  - name: PROXY MANUAL
    type: select
    use:
$PROVIDERS_LIST

  - name: PROXYRU AUTO
    type: fallback
    proxies:
      - PROXYRU FASTEST
      - PROXYRU FAILOVER
      - DIRECT
    url: http://www.msftncsi.com/ncsi.txt
    filter: '(?i)üá∑üá∫ |RU'  # ‚Üê –ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ –ø—Ä–µ—Ñ–∏–∫—Å –Ω—É–∂–Ω–æ–≥–æ –ø—Ä–æ–∫—Å–∏ –∏–∑ –ø–æ–¥–ø–∏—Å–∫–∏
    # –ò–Ω—Ç–µ—Ä–≤–∞–ª –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏, —á—Ç–æ–±—ã "–æ—Ç–ª–∏–ø–Ω—É—Ç—å" –æ—Ç DIRECT/PROXY FAILOVER –∏ –≤–µ—Ä–Ω—É—Ç—å—Å—è –∫ PROXY FASTEST
    interval: 200

  # –ì—Ä—É–ø–ø–∞ –¥–ª—è –≤—ã–±–æ—Ä–∞ —Å–∞–º–æ–≥–æ –±—ã—Å—Ç—Ä–æ–≥–æ –∏–∑ –ñ–ò–í–´–• –ø—Ä–æ–∫—Å–∏.
  - name: PROXYRU FASTEST
    type: url-test
    use:
$PROVIDERS_LIST
    url: http://www.msftncsi.com/ncsi.txt
    filter: '(?i)üá∑üá∫ |RU'
    # –ò–Ω—Ç–µ—Ä–≤–∞–ª –¥–ª—è –ø–µ—Ä–µ—Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ –∂–∏–≤—ã—Ö –ø—Ä–æ–∫—Å–∏ –ø–æ —Å–∫–æ—Ä–æ—Å—Ç–∏
    interval: 300
    lazy: false

  # –ì—Ä—É–ø–ø–∞ –¥–ª—è –ø–µ—Ä–µ–±–æ—Ä–∞ –í–°–ï–• –∂–∏–≤—ã—Ö –ø—Ä–æ–∫—Å–∏ –≤ —Å–ª—É—á–∞–µ –æ—Ç–∫–∞–∑–∞ —Å–∞–º–æ–≥–æ –±—ã—Å—Ç—Ä–æ–≥–æ.
  # –≠—Ç–æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ –º—ã –Ω–µ –ø–µ—Ä–µ–∫–ª—é—á–∏–º—Å—è –Ω–∞ DIRECT, –ø–æ–∫–∞ –µ—Å—Ç—å —Ö–æ—Ç—å –æ–¥–∏–Ω –∂–∏–≤–æ–π –ø—Ä–æ–∫—Å–∏.
  - name: PROXYRU FAILOVER
    type: fallback
    use:
$PROVIDERS_LIST
    url: http://www.msftncsi.com/ncsi.txt
    filter: '(?i)üá∑üá∫ |RU' 
    interval: 200

  # –°–∫—Ä—ã—Ç—å –ª–∏ –≥—Ä—É–ø–ø—É GLOBAL
  - name: GLOBAL
    type: select
    hidden: false
    proxies:
      - PROXY AUTO
      - PROXY MANUAL
      - PROXY FASTEST
      - PROXY FAILOVER
      - DIRECT

  # QUIC
  - name: QUIC
    type: select
    proxies:
      - PASS
      - REJECT

  # –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —Ä–µ–∫–ª–∞–º—ã –∏ –Ω–µ–∂–µ–ª–∞—Ç–µ–ª—å–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
  #  - name: Ad-Filter
  #    type: select
  #    icon: "https://cdn.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/AdBlack.png"
  #    proxies:
  #      - PASS
  #      - REJECT

  # –ì—Ä—É–ø–ø—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π
  - name: Telegram
    type: select
    icon: https://cdn.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Telegram.png
    include-all: true
    proxies:
      - SELECTOR
      - PROXY AUTO
      - PROXY MANUAL
      - DIRECT

  - name: WhatsApp
    type: select
    icon: https://github.com/OMchik33/Whatsapp-icon/blob/master/icons/whatsapp_194x194.png?raw=true
    include-all: true
    proxies:
      - SELECTOR
      - PROXY AUTO
      - PROXY MANUAL
      - DIRECT

  - name: Ru-Traffic
    type: select
    icon: 'https://cdn.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Russia.png'
    include-all: true
    proxies:
      - SELECTOR
      - PROXY AUTO
      - PROXY MANUAL
      - DIRECT

  - name: ECH-Refilter
    type: select
    icon: 'https://cdn.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Direct.png'
    include-all: true
    proxies:
      - SELECTOR
      - PROXY AUTO
      - PROXY MANUAL
      - DIRECT

  - name: META
    type: select
    icon: 'https://cdn.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Facebook.png'
    include-all: true
    proxies:
      - SELECTOR
      - PROXY AUTO
      - PROXY MANUAL
      - DIRECT

  - name: AMAZON
    type: select
    icon: 'https://cdn.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Amazon.png'
    include-all: true
    proxies:
      - SELECTOR
      - PROXY AUTO
      - PROXY MANUAL
      - DIRECT

  - name: FASTLY
    type: select
    icon: 'https://cdn.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Global.png'
    include-all: true
    proxies:
      - SELECTOR
      - PROXY AUTO
      - PROXY MANUAL
      - DIRECT

  - name: AKAMAI
    type: select
    icon: 'https://cdn.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Global.png'
    include-all: true
    proxies:
      - SELECTOR
      - PROXY AUTO
      - PROXY MANUAL
      - DIRECT

  - name: GOOGLE
    type: select
    icon: 'https://cdn.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Google.png'
    include-all: true
    proxies:
      - SELECTOR
      - PROXY AUTO
      - PROXY MANUAL
      - DIRECT

  - name: CLOUDFLARE
    type: select
    icon: 'https://cdn.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Cloudflare.png'
    include-all: true
    proxies:
      - SELECTOR
      - PROXY AUTO
      - PROXY MANUAL
      - DIRECT

  - name: CDN77
    type: select
    icon: 'https://cdn.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Global.png'
    include-all: true
    proxies:
      - SELECTOR
      - PROXY AUTO
      - PROXY MANUAL
      - DIRECT

  - name: DIGITALOCEAN
    type: select
    icon: 'https://cdn.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Global.png'
    include-all: true
    proxies:
      - SELECTOR
      - PROXY AUTO
      - PROXY MANUAL
      - DIRECT

  - name: HETZNER
    type: select
    icon: 'https://cdn.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Global.png'
    include-all: true
    proxies:
      - SELECTOR
      - PROXY AUTO
      - PROXY MANUAL
      - DIRECT

  - name: MEGA
    type: select
    icon: 'https://cdn.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Global.png'
    include-all: true
    proxies:
      - SELECTOR
      - PROXY AUTO
      - PROXY MANUAL
      - DIRECT

  - name: ORACLE
    type: select
    icon: 'https://cdn.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Global.png'
    include-all: true
    proxies:
      - SELECTOR
      - PROXY AUTO
      - PROXY MANUAL
      - DIRECT

  - name: OVH
    type: select
    icon: 'https://cdn.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Global.png'
    include-all: true
    proxies:
      - SELECTOR
      - PROXY AUTO
      - PROXY MANUAL
      - DIRECT

  - name: VULTR
    type: select
    icon: 'https://cdn.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Global.png'
    include-all: true
    proxies:
      - SELECTOR
      - PROXY AUTO
      - PROXY MANUAL
      - DIRECT

  - name: Steam
    type: select
    icon: https://cdn.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Steam.png
    include-all: true
    proxies:
      - SELECTOR
      - PROXY AUTO
      - PROXY MANUAL
      - DIRECT

  - name: Discord
    type: select
    icon: https://cdn.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Discord.png
    include-all: true
    proxies:
      - SELECTOR
      - PROXY AUTO
      - PROXY MANUAL
      - DIRECT

  - name: YouTube
    type: select
    icon: https://cdn.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/YouTube.png
    include-all: true
    proxies:
      - SELECTOR
      - PROXYRU AUTO   
      - PROXY AUTO
      - PROXY MANUAL
      - DIRECT

  - name: Twitch
    type: select
    icon: https://img.icons8.com/3d-fluency/94/twitch.png
    include-all: true
    proxies:
      - SELECTOR
      - PROXY AUTO
      - PROXY MANUAL
      - DIRECT

  - name: AI & –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞
    type: select
    icon: https://cdn.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Dark/Bot.png
    include-all: true
    proxies:
      - SELECTOR
      - PROXY AUTO
      - PROXY MANUAL
      - DIRECT

  - name: GoogleGemini
    type: select
    icon: https://cdn.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Dark/Bot.png
    include-all: true
    proxies:
      - SELECTOR
      - PROXY AUTO
      - PROXY MANUAL
      - DIRECT

  - name: OpenAI
    type: select
    icon: https://cdn.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Dark/Bot.png
    include-all: true
    proxies:
      - SELECTOR
      - PROXY AUTO
      - PROXY MANUAL
      - DIRECT

  - name: Microsoft
    type: select
    icon: https://cdn.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Dark/Microsoft.png
    include-all: true
    proxies:
      - SELECTOR
      - PROXY AUTO
      - PROXY MANUAL
      - DIRECT

  - name: Anthropic
    type: select
    icon: https://cdn.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Dark/Bot.png
    include-all: true
    proxies:
      - SELECTOR
      - PROXY AUTO
      - PROXY MANUAL
      - DIRECT

  - name: Perplexity
    type: select
    icon: https://cdn.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Dark/Bot.png
    include-all: true
    proxies:
      - SELECTOR
      - PROXY AUTO
      - PROXY MANUAL
      - DIRECT

  - name: Torrent-Traffic
    type: select
    icon: 'https://cdn.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Download.png'
    include-all: true
    proxies:
      - SELECTOR
      - PROXY AUTO
      - PROXY MANUAL
      - DIRECT

  - name: Politic-Domains
    type: select
    icon: 'https://cdn.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Media.png'
    include-all: true
    proxies:
      - SELECTOR
      - PROXY AUTO
      - PROXY MANUAL
      - DIRECT

  - name: Other-Domains
    type: select
    icon: 'https://cdn.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Puzzle.png'
    include-all: true
    proxies:
      - SELECTOR
      - PROXY AUTO
      - PROXY MANUAL
      - DIRECT

# RULE PROVIDERS
rule-providers:
  telegram-domain:
    type: http
    behavior: domain
    format: mrs
    url: https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/telegram.mrs
    path: ./rule-sets/telegram-domain.mrs
    interval: 86400

  telegram-ips:
    type: http
    behavior: ipcidr
    format: yaml
    url: https://raw.githubusercontent.com/OMchik33/custom-rules/refs/heads/main/mihomo/telegram-ips.yaml
    path: ./rule-sets/telegram-ips.yaml
    interval: 86400

  whatsapp-domain:
    type: http
    behavior: domain
    format: mrs
    url: https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/whatsapp.mrs
    path: ./rule-sets/whatsapp-domain.mrs
    interval: 86400

  steam-domain:
    type: http
    behavior: domain
    format: yaml
    url: https://raw.githubusercontent.com/OMchik33/custom-rules/refs/heads/main/mihomo/gaming-domains.yaml
    path: ./rule-sets/steam-domain.yaml
    interval: 86400

  steam-ips:
    type: http
    behavior: ipcidr
    format: yaml
    url: https://raw.githubusercontent.com/OMchik33/custom-rules/refs/heads/main/mihomo/gaming-ips.yaml
    path: ./rule-sets/steam-ips.yaml
    interval: 86400

  twitch-domain:
    type: http
    behavior: domain
    format: mrs
    url: https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/twitch.mrs
    path: ./rule-sets/twitch-domain.mrs
    interval: 86400

#  ru-app-list:
#    type: http
#    behavior: classical
#    format: yaml
#    url: 'https://github.com/legiz-ru/mihomo-rule-sets/raw/main/other/ru-app-list.yaml'
#    path: ./rule-sets/ru-app-list.yaml
#    interval: 86400

  discord_domains:
    type: http
    behavior: domain
    format: mrs
    url: https://github.com/MetaCubeX/meta-rules-dat/raw/meta/geo/geosite/discord.mrs
    path: ./rule-sets/discord_domains.mrs
    interval: 86400

  discord_voiceips:
    type: http
    behavior: ipcidr
    format: mrs
    url: https://github.com/legiz-ru/mihomo-rule-sets/raw/main/other/discord-voice-ip-list.mrs
    path: ./rule-sets/discord_voiceips.mrs
    interval: 86400

  google_gemini:
    type: http
    behavior: domain
    format: mrs
    url: https://github.com/MetaCubeX/meta-rules-dat/raw/meta/geo/geosite/google-gemini.mrs
    path: ./rule-sets/google-gemini.mrs
    interval: 86400

  openai:
    type: http
    behavior: domain
    format: mrs
    url: https://github.com/MetaCubeX/meta-rules-dat/raw/meta/geo/geosite/openai.mrs
    path: ./rule-sets/openai.mrs
    interval: 86400

  microsoft:
    type: http
    behavior: domain
    format: mrs
    url: https://github.com/MetaCubeX/meta-rules-dat/raw/meta/geo/geosite/microsoft.mrs
    path: ./rule-sets/microsoft.mrs
    interval: 86400

  anthropic:
    type: http
    behavior: domain
    format: mrs
    url: https://github.com/MetaCubeX/meta-rules-dat/raw/meta/geo/geosite/anthropic.mrs
    path: ./rule-sets/anthropic.mrs
    interval: 86400

  perplexity:
    type: http
    behavior: domain
    format: mrs
    url: https://github.com/MetaCubeX/meta-rules-dat/raw/meta/geo/geosite/perplexity.mrs
    path: ./rule-sets/perplexity.mrs
    interval: 86400

  youtube:
    type: http
    behavior: domain
    format: mrs
    url: https://github.com/MetaCubeX/meta-rules-dat/raw/meta/geo/geosite/youtube.mrs
    path: ./rule-sets/youtube.mrs
    interval: 86400

  refilter_noech:
    type: http
    behavior: domain
    format: mrs
    url: 'https://github.com/legiz-ru/mihomo-rule-sets/raw/main/re-filter/re-filter-noech.mrs'
    path: ./rule-sets/refilter-noech.mrs
    interval: 86400

  refilter_ech:
    type: http
    behavior: domain
    format: mrs
    url: 'https://github.com/legiz-ru/mihomo-rule-sets/raw/main/re-filter/re-filter-ech.mrs'
    path: ./rule-sets/refilter-ech.mrs
    interval: 86400

  refilter_ipsum:
    type: http
    behavior: ipcidr
    format: mrs
    url: 'https://github.com/legiz-ru/mihomo-rule-sets/raw/main/re-filter/ip-rule.mrs'
    path: ./rule-sets/refilter-ip-rule.mrs
    interval: 86400

  torrent-clients:
    type: http
    behavior: classical
    format: yaml
    url: 'https://github.com/legiz-ru/mihomo-rule-sets/raw/main/other/torrent-clients.yaml'
    path: ./rule-sets/torrent-clients.yaml
    interval: 86400

  torrent-trackers:
    type: http
    behavior: domain
    format: mrs
    url: 'https://raw.githubusercontent.com/legiz-ru/mihomo-rule-sets/main/other/torrent-trackers.mrs'
    path: ./rule-sets/torrent-trackers.mrs
    interval: 86400

  torrent-websites:
    type: http
    behavior: domain
    format: mrs
    url: 'https://raw.githubusercontent.com/legiz-ru/mihomo-rule-sets/main/other/torrent-websites.mrs'
    path: ./rule-sets/torrent-websites.mrs
    interval: 86400

  # –ü—Ä–∞–≤–∏–ª–∞ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ —Ä–µ–∫–ª–∞–º—ã –∏ –Ω–µ–∂–µ–ª–∞—Ç–µ–ª—å–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ (OISD)
  #  oisd_big:
  #    type: http
  #    behavior: domain
  #    format: mrs
  #    url: "https://github.com/legiz-ru/mihomo-rule-sets/raw/main/oisd/big.mrs"
  #    path: ./oisd/big.mrs
  #    interval: 86400

  #  oisd_small:
  #    type: http
  #    behavior: domain
  #    format: mrs
  #    url: "https://github.com/legiz-ru/mihomo-rule-sets/raw/main/oisd/small.mrs"
  #    path: ./oisd/small.mrs
  #    interval: 86400

  #  oisd_nsfw_small:
  #    type: http
  #    behavior: domain
  #    format: mrs
  #    url: "https://github.com/legiz-ru/mihomo-rule-sets/raw/main/oisd/nsfw_small.mrs"
  #    path: ./oisd/nsfw_small.mrs
  #    interval: 86400

  #  oisd_nsfw_big:
  #    type: http
  #    behavior: domain
  #    format: mrs
  #    url: "https://github.com/legiz-ru/mihomo-rule-sets/raw/main/oisd/nsfw.mrs"
  #    path: ./oisd/nsfw_big.mrs
  #    interval: 86400

  misc-ai:
    type: inline
    behavior: classical
    format: text
    payload:
      # xAI (Grok)
      - DOMAIN-SUFFIX,x.ai
      - DOMAIN-SUFFIX,grok.x.ai
      - DOMAIN-SUFFIX,api.x.ai
      - DOMAIN-KEYWORD,grok

      # Hugging Face
      - DOMAIN-SUFFIX,huggingface.co
      - DOMAIN-SUFFIX,hf.co
      - DOMAIN-SUFFIX,huggingface.com
      - DOMAIN-KEYWORD,huggingface

      # Midjourney & Creative AI
      - DOMAIN-SUFFIX,midjourney.com
      - DOMAIN-SUFFIX,cdn.midjourney.com
      - DOMAIN-KEYWORD,midjourney
      - DOMAIN-SUFFIX,stability.ai
      - DOMAIN-SUFFIX,stablediffusionweb.com
      - DOMAIN-SUFFIX,dreamstudio.ai
      - DOMAIN-SUFFIX,runwayml.com
      - DOMAIN-SUFFIX,runway.ml

      # Character.AI & Others
      - DOMAIN-SUFFIX,character.ai
      - DOMAIN-SUFFIX,beta.character.ai
      - DOMAIN-SUFFIX,replicate.com
      - DOMAIN-SUFFIX,cohere.ai
      - DOMAIN-SUFFIX,cohere.com

      # Development Tools
      - DOMAIN-SUFFIX,jetbrains.com
      - DOMAIN-SUFFIX,replit.com
      - DOMAIN-SUFFIX,repl.it
      - DOMAIN-SUFFIX,stackoverflow.com
      - DOMAIN-SUFFIX,docker.com
      - DOMAIN-SUFFIX,docker.io
      - DOMAIN-SUFFIX,npmjs.com
      - DOMAIN-SUFFIX,pypi.org

# –ü–†–ê–í–ò–õ–ê –ú–ê–†–®–†–£–¢–ò–ó–ê–¶–ò–ò
rules:
  # –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å: –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —É—è–∑–≤–∏–º—ã—Ö UDP –ø–æ—Ä—Ç–æ–≤
  #- AND,((NETWORK,udp),(DST-PORT,135)),REJECT
  #- AND,((NETWORK,udp),(DST-PORT,137)),REJECT
  #- AND,((NETWORK,udp),(DST-PORT,138)),REJECT
  #- AND,((NETWORK,udp),(DST-PORT,139)),REJECT

  # –õ–æ–∫–∞–ª–∫–∞ –∏ DNS
  - IP-CIDR,192.168.0.0/16,DIRECT,no-resolve
  - IP-CIDR,10.0.0.0/8,DIRECT,no-resolve
  - IP-CIDR,172.16.0.0/12,DIRECT,no-resolve
  - IP-CIDR,127.0.0.0/8,DIRECT,no-resolve
  # QUIC —Ç—Ä–∞—Ñ–∏–∫
  - AND,((NETWORK,udp),(DST-PORT,443)),QUIC
  
  # –†–µ–∫–ª–∞–º–∞ / NSFW
  #  - RULE-SET,oisd_small,Ad-Filter
  #  - RULE-SET,oisd_big,Ad-Filter
  #  - RULE-SET,oisd_nsfw_small,Ad-Filter
  #  - RULE-SET,oisd_nsfw_big,Ad-Filter
  
  # IP-—á–µ–∫–µ—Ä—ã ‚Äî –≤—Å–µ–≥–¥–∞ —á–µ—Ä–µ–∑ SELECTOR
  - OR,((DOMAIN,ipwho.is),(DOMAIN,api.ip.sb),(DOMAIN,ipapi.co),(DOMAIN,ipinfo.io),(DOMAIN,2ip.io),(DOMAIN,2ip.ru)),SELECTOR

  # –¢–æ—Ä—Ä–µ–Ω—Ç—ã
  - OR,((RULE-SET,torrent-clients),(RULE-SET,torrent-trackers)),Torrent-Traffic
  - RULE-SET,torrent-websites,Torrent-Traffic
  
  # AI –ü—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏ —Å–µ—Ä–≤–∏—Å—ã (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –≤—ã—à–µ)
  - RULE-SET,misc-ai,AI & –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

  # –†–æ—Å—Å–∏–π—Å–∫–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏ IP
  #- RULE-SET,ru-app-list,DIRECT
  - GEOIP,ru,Ru-Traffic

  # –ü—Ä–∏–ª–æ–∂–µ–Ω–∏—è
  - OR,((RULE-SET,telegram-domain),(RULE-SET,telegram-ips)),Telegram
  - RULE-SET,whatsapp-domain,WhatsApp
  - OR,((RULE-SET,discord_domains),(RULE-SET,discord_voiceips)),SELECTOR
  - OR,((RULE-SET,steam-domain),(RULE-SET,steam-ips)),Steam
  - RULE-SET,anthropic,Anthropic
  - RULE-SET,perplexity,Perplexity
  - RULE-SET,google_gemini,GoogleGemini
  - RULE-SET,openai,OpenAI
  - RULE-SET,microsoft,Microsoft
  - RULE-SET,twitch-domain,Twitch
  - RULE-SET,youtube,YouTube

  # CDN / –æ–±–ª–∞–∫–∞ (ZKEEN GEOIP)
  - GEOIP,akamai,AKAMAI
  - GEOIP,amazon,AMAZON
  - GEOIP,fastly,FASTLY
  - GEOIP,google,GOOGLE
  - GEOIP,cloudflare,CLOUDFLARE
  - GEOIP,cdn77,CDN77

  # ECH re-filter
  - DOMAIN,cloudflare-ech.com,SELECTOR
  - RULE-SET,refilter_ech,DIRECT
  - RULE-SET,refilter_noech,ECH-Refilter
  - RULE-SET,refilter_ipsum,ECH-Refilter

  # –û–±–ª–∞–∫–∞ / —Ö–æ—Å—Ç–∏–Ω–≥–∏
  - GEOIP,meta,META
  - GEOIP,digitalocean,DIGITALOCEAN
  - GEOIP,hetzner,HETZNER
  - GEOIP,mega,MEGA
  - GEOIP,oracle,ORACLE
  - GEOIP,ovh,OVH
  - GEOIP,vultr,VULTR

  # –ù–∏–∂–µ, –ø–æ—Ç–æ–º—É —á—Ç–æ –¥–æ–º–µ–Ω—ã –º–æ–≥—É—Ç –ø–µ—Ä–µ—Å–µ–∫–∞—Ç—å—Å—è —Å –¥—Ä—É–≥–∏–º–∏ –ø—Ä–∞–≤–∏–ª–∞–º–∏ –≤—ã—à–µ
  # ZKEEN geosite:
  # domains  ‚Äî –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ –≤ –†–§
  # other    ‚Äî —Ä–µ—Å—É—Ä—Å—ã, –±–ª–æ–∫–∏—Ä—É—é—â–∏–µ –†–§
  # politic  ‚Äî –Ω–æ–≤–æ—Å—Ç–Ω—ã–µ/–ø–æ–ª–∏—Ç–∏—á–µ—Å–∫–∏–µ
  - GEOSITE,domains,Other-Domains
  - GEOSITE,other,Other-Domains
  - GEOSITE,politic,Politic-Domains

  # –û–±—â–∏–π –∑–∞–ø–∞—Å–Ω–æ–π –∫–æ–Ω—Ç—É—Ä –≥–æ–ª–æ—Å/–∏–≥—Ä—ã
  - OR,((DST-PORT,596-599),(DST-PORT,1400),(DST-PORT,3478-3480),(DST-PORT,4379-4380),(DST-PORT,5222),(DST-PORT,5223),(DST-PORT,5228),(DST-PORT,5242),(DST-PORT,6250),(DST-PORT,12000-65535),(DST-PORT,27101-65535),(DST-PORT,45395),(DST-PORT,50318),(DST-PORT,59234)),SELECTOR
  
  # –ü—Ä–∏–º–µ—Ä –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –ø—Ä–∞–≤–∏–ª
  #  - DST-PORT,12345,DIRECT
  #  - IP-CIDR,1.2.3.4/32,DIRECT,no-resolve
  #  - DOMAIN-SUFFIX,mydirectsite.ru,DIRECT
  #
  #  - DST-PORT,54321,SELECTOR
  #  - IP-CIDR,5.6.7.8/32,SELECTOR,no-resolve
  #  - DOMAIN-SUFFIX,myproxysite.com,SELECTOR

  # TUN –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∏ mixed
  - IN-NAME,tun-in,SELECTOR
  - IN-NAME,mixed-in,SELECTOR
  
  # –í–µ—Å—å –æ—Å—Ç–∞–ª—å–Ω–æ–π —Ç—Ä–∞—Ñ–∏–∫
  - MATCH,SELECTOR
